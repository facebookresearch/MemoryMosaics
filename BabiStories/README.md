# BabiStories Generated by Mixtral8x7b


We include the generated BabiStories (train set and test set) in `data/babistories-dataset.7z`. To use the BabiStories dataset, simply extract them by `7z x babistories-dataset.7z`. Alternatively, one can reproduce the story generation process as follow:

## Generation process 
### 1) Generate 389,967 story startings ranging from 1 to 12 words by Mixtral8x7b

Examples:
- In
- In a
- In a hidden valley,
- In a hidden valley, full of vibrant colors

<!-- We include the generated story startings in `data/allstartings.txt`. Alternatively, one can reproduce these startings (up to some randomness) by the following scripts: -->

To generate these startings, use the following scripts:

```sh
python generate_starting.py --idx [0-127]    --prompt "Please give me 100 ways to open children's story. Avoid repeated first words! Remember to only use simple words!"
python generate_starting.py --idx [0-127]p2  --prompt "Please give me 100 ways to open children's story. Remember to only use simple words!"
```


### 2) Generate 3,984 character names by Mixtral8x7b

Examples:
- Novak
- Hudson
- Dyllan

<!-- We include the generated character names in `data/allnames.txt`. Again one can reproduce these names by the followiing scripts: -->

To generate these startings, use the following scripts:
```sh
python data/mixtral_tinystories/generate_names.py --idx [0-127]
```


### 3) Generate stories with a certain name and story starting.

Example Prompt:

[INST] Write a short story (3-5 paragraphs) which only uses very simple words that a 3 year old child would understand. The story should use **the character name "Eliana",** the verb "spring", the noun "trouble" and the adjective "open". The story has the following features: the story should contain at least one dialogue, the story has some form of conflict in it, the story has a moral value, something unexpected happens / there is a plot twist. Remember to only use simple words! [/INST] **A kind-hearted doctor named**

Stories Generation: 

* Download story generation prompts from [here](https://huggingface.co/datasets/roneneldan/TinyStories/blob/main/TinyStories_all_data.tar.gz), extract all files to foler `metaprompt/`. 
* Then go to 'metaprompt' folder and split prompt files into small groups by `split_data.py` for the ease of parallelization. 

* Finally, generate BabiStories by the following script (where ${data} ranges from 0 to 24, ${subdata} ranges from 0 to 99): 
```sh
python generate.py --data_idx ${data} --sub_data_idx ${subdata} 
```

### 4) Cleaning generated stories

Go to `data/` folder and clean the generated stories by the following script:
```sh
python filter_tinystories.py
```

